# ğŸ’í”„ë¡œì íŠ¸ëª… : One more bag [ì‡¼í•‘ëª° í´ë¡ ì½”ë”©]

#### í”„ë¡œì íŠ¸ ì„¤ëª… : https://onemorebag.kr/product/list.html?cate_no=45 ì›¹ì‚¬ì´íŠ¸ í´ë¡ ì½”ë”©
##### í”„ë¡œì íŠ¸ ê¸°ê°„: 22/9/9-15
<img width="1757" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-15 á„‹á…©á„’á…® 1 13 38" src="https://user-images.githubusercontent.com/104494969/190312656-94c2cfd5-2dcb-470f-8b94-2a12e3f3ed42.png">

#####  ì„œë²„ ë°°í¬: http://hyerimawsbucket.s3-website.ap-northeast-2.amazonaws.com/
##### FE Github : origin[https://github.com/jamie7dev/W7_One_more_bag.git]
##### FE Github organization - origin2[https://github.com/codingshoppingmall8/FE]
##### BE Github : [https://github.com/codingshoppingmall8/BE]

## ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦Team Members
**[FE] Hye-rim-Lee, Chae-won-Yoon** <br>
**[BE] Sun-Hong-Lee, Dong-Ha-Shin, Ha-Young-Kim**

## âš’Tech Stack
<img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=Spring&logoColor=white"/>&nbsp;<img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=for-the-badge&logo=Spring Boot&logoColor=white"/>
<img src="https://img.shields.io/badge/Spring Security-6DB33F?style=for-the-badge&logo=Spring Security&logoColor=white"/>
<img src="https://img.shields.io/badge/react-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB"/>
<img src="https://img.shields.io/badge/html5-%23E34F26.svg?style=for-the-badge&logo=html5&logoColor=white"/>
<img src="https://img.shields.io/badge/css3-%231572B6.svg?style=for-the-badge&logo=css3&logoColor=white"/>
<img src="https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E"/>
<img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=MySQL&logoColor=white"/>
<img src="https://img.shields.io/badge/Gradle-02303A.svg?style=for-the-badge&logo=Gradle&logoColor=white"/>
<img src="https://img.shields.io/badge/kakaotalk-ffcd00.svg?style=for-the-badge&logo=kakaotalk&logoColor=000000"/>
<img src="https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white"/>
<img src="https://img.shields.io/badge/IntelliJIDEA-000000.svg?style=for-the-badge&logo=intellij-idea&logoColor=white"/>
<img src="https://img.shields.io/badge/Visual Studio Code-007ACC.svg?style=for-the-badge&logo=Visual Studio Code&logoColor=white"/>
<img src="https://img.shields.io/badge/Amazon Web Service-232F3E?style=for-the-badge&logo=Amazon%20AWS&logoColor=white"/>

## ğŸ’¾ERD
![image](https://user-images.githubusercontent.com/67679972/190326599-51dfb9a8-8e60-45f8-85ea-711b7c2f26cc.png)
<br>

## ğŸ“ƒapiëª…ì„¸ì„œ
ë§í¬ : https://nonchalant-sturgeon-21a.notion.site/8-d8cd94d7525843618ebc766da876d5d0
|ê¸°ëŠ¥|ë©”ì†Œë“œ|URL|
|------|---|---|
|ì´ë©”ì¼ì¤‘ë³µì²´í¬|GET|api/member/signup|
|íšŒì›ê°€ì…|POST|api/member/signup|
|ë¡œê·¸ì¸|POST|api/member/login|
|ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸|GET|api/member/kakao|
|ë©”ì¸í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°|GET|api/post?page=|
|ë©”ì¸í˜ì´ì§€ ì •ë ¬|GET|api/sort_post?page= &sort_method=|
|ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê°€ì ¸ì˜¤ê¸°|GET|api/post_category?page=&cate_no=|
|ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì •ë ¬|GET|api/post_category?page=&cate_n&sort_method=|
|ìƒì„¸í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°|GET|api/post/{id}|
|ë§ˆì´í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°|GET|api/member/mypage|
|ë§ˆì´í˜ì´ì§€ ìˆ˜ì •|POST|api/member/mypage|
|ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°|POST|api/member/cart/{id}|
|ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ|GET|api/member/cart|
|ì¥ë°”êµ¬ë‹ˆ ì‚­ì œ|DELETE|api/member/cart|
|ì¥ë°”êµ¬ë‹ˆ ì „ì²´ì‚­ì œ|DELETE|api/member/cart/deleteAll|
|ê²Œì‹œê¸€ ë“±ë¡|GET|api/member/cart|
|ê²Œì‹œê¸€ ì‚­ì œ|DELETE|api/member/cart{id}|
<br>


## ğŸ“–ê¸°ëŠ¥ êµ¬í˜„ List

1. **íšŒì›ê°€ì…**
    - **Email ì¤‘ë³µ ê²€ì‚¬**
    - **Email ìœ íš¨ì„± ê²€ì‚¬**
    - **PW ë° PW Confirm ìœ íš¨ì„± ê²€ì‚¬**
    - **íœ´ëŒ€ì „í™” ìœ íš¨ì„± ê²€ì‚¬**
    
2. **ë¡œê·¸ì¸**
    - **Email, PW ì…ë ¥ì‹œ ê³µë°± ìœ íš¨ì„± ê²€ì‚¬**
    - **Email, PW ì¼ì¹˜ ê²€ì‚¬**
    - **Access Tokenê³¼ Refresh Tokenì„ Cookieì— ì €ì¥í•˜ê³  interceptor ì‚¬ìš©
       ëª¨ë“  í˜ì´ì§€ì—ì„œ ë¡œê·¸ì¸ ìœ ì§€**
    - **ì†Œì…œ ë¡œê·¸ì¸ êµ¬í˜„(ì¹´ì¹´ì˜¤) Tokenì„ localStorageì— ì €ì¥**   
3. **ë§ˆì´í˜ì´ì§€**
    - **íšŒì› ì •ë³´ ìˆ˜ì • (ì´ë¦„, ì£¼ì†Œ, íœ´ëŒ€ì „í™”)**
    
4. **ë©”ì¸ í˜ì´ì§€**
   - **ìƒí’ˆ ì¹´í…Œê³ ë¦¬ë³„ ì •ë ¬**
    - **Pagination**
    - **ì‹ ìƒí’ˆ/ìƒí’ˆëª…/ë‚®ì€ê°€ê²©/ë†’ì€ê°€ê²©/ì¡°íšŒìˆ˜ ì •ë ¬**
    - **css(ìŠ¤í¬ë¡¤ì‹œ í—¤ë” ê³ ì •, grid, ë°˜ì‘í˜• ì›¹í˜ì´ì§€)**
    
5. **ì¥ë°”êµ¬ë‹ˆ**
    - **ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆ ì¶”ê°€, ê°œë³„ ì‚­ì œ**
    - **checkbox ì „ì²´ ì„ íƒ, í•´ì œ, ì„ íƒ ì‚­ì œ**
    - **ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸° (ëª©ë¡ ì „ì²´ ì‚­ì œ)**


-----------------

## Front) ğŸ˜¡TroubleShooting 

- A component is changing a controlled input to be uncontrolled.    
    ì›ì¸) input íƒœê·¸ì˜ value ì´ˆê¸°ê°’ì´ undefinedì˜€ë‹¤ê°€ ë Œë”ë§ í›„ì— ê°’ì´ ë“¤ì–´ì™€ ë°”ë€Œë©´ì„œ ë°œìƒí•œ ì—ëŸ¬    
    í•´ê²°) input íƒœê·¸ valueì— ê³µë°±ì„ ì¤˜ì„œ ||'' controlled inputì˜ ë²”ì£¼ì— í¬í•¨ì‹œì¼œì£¼ë©´ ë¨    
        ì˜ˆ) value={arr[i]|| ''}    
   
- ì¥ë°”êµ¬ë‹ˆ ëª©ë¡ì—ì„œ ê°œë³„ ì‚­ì œê°€ ì•ˆ ë¨ 400ì—ëŸ¬    
    ì›ì¸) payloadë¥¼ ì˜ëª» ë³´ëƒ„    
    í•´ê²°) axios.deleteëŠ” dataë¥¼ bodyì— ë‹´ì„ ë•Œ data:{}ë¡œ ê°ì‹¸ì„œ ë³´ë‚´ì¤˜ì•¼ í•œë‹¤ê³  í•¨.    
      ì˜ˆ) Axios.delete(`/posts/${id}`, {data:{posts: posts}})    
      
- íšŒì›ì •ë³´ê°€ ì—†ëŠ” íšŒì›ì´ ì¼ë°˜ë¡œê·¸ì¸ì„ ì‹œë„í•  ì‹œ ë¡œê·¸ì¸ë˜ë©°, ì¿ í‚¤ì— í† í°ì´ undefinedë¡œ ì €ì¥ë˜ëŠ” ë¬¸ì œ   
ì´ë¡œ ì¸í•´ ì‹¤ì œ íšŒì›ì´ ì•„ë‹ˆì–´ë„ ë¡œê·¸ì¸ì´ ëœ ê²ƒìœ¼ë¡œ ë°›ì•„ë“¤ì—¬ì ¸ í—¤ë”ì— ì¡°ê±´ë¶€ ë Œë”ë§ì´ ì ìš©ë˜ì–´ ë¡œê·¸ì•„ì›ƒ, ë§ˆì´í˜ì´ì§€, ì¥ë°”êµ¬ë‹ˆ ë²„íŠ¼ì´ ë³´ì˜€ìŒ   
  ì›ì¸) ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆŒë €ì„ ì‹œ íšŒì›ì¸ì§€ í™•ì¸í•œ ë’¤ POSTìš”ì²­ì„ ë³´ë‚´ì§€ ì•Šê³ , inputì˜ ì…ë ¥ì—¬ë¶€ë§Œ í™•ì¸í•˜ê³  ìˆì—ˆìŒ   
  í•´ê²°) ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ GETìš”ì²­ìœ¼ë¡œ íšŒì›emailì„ ë°›ì•„ì˜¨ ë’¤, ì…ë ¥í•œ ì´ë©”ì¼ê³¼ ì¼ì¹˜í•˜ëŠ” ì´ë©”ì¼ì´ ì—†ì„ ê²½ìš° ë¡œê·¸ì¸ì„ ë§‰ì•„ì£¼ì–´ ì¿ í‚¤ì— í† í°ì´ undefinedë¡œ ì €ì¥ë˜ì§€ ëª»í•˜ê²Œ ì²˜ë¦¬
    
- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„ì„ ì™„ë£Œí•œ ì‹œì ë¶€í„° ì¼ë°˜ë¡œê·¸ì¸ì„ ì‹œë„í–ˆì„ ë•Œ ìš”ì²­í—¤ë”ì— Authorizationê³¼ refreshTokenì´ nullë¡œ ë“¤ì–´ê°€ë©° ë¡œê·¸ì¸ì´ ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ   
ì›ì¸) api.js íŒŒì¼ì— ìš”ì²­ì¸í„°ì…‰í„° ì½”ë“œë¥¼ ì˜ëª» ì‘ì„±í•¨. ì¡°ê±´ë¬¸ì„ ê±¸ì§€ ì•Šì•„ ì½”ë“œê°€ ìˆœì°¨ì ìœ¼ë¡œ ì½íˆë©° ìš”ì²­í—¤ë”ì— ì—†ëŠ” í† í°ì„ ì‹¤ì–´ì£¼ëŠ” í˜•íƒœê°€ ë¨.   
í•´ê²°) ìš”ì²­ì¸í„°ì…‰í„° ì½”ë“œë¥¼ ifë¬¸ìœ¼ë¡œ ìˆ˜ì •í•¨.   
ì¼ë°˜ ë¡œê·¸ì¸ì€ tokenì„ ì¿ í‚¤ì— ì €ì¥í•˜ê³ , ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì€ tokenì„ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ëŠ”ë°,    
ifë¬¸ìœ¼ë¡œ ì¡°ê±´ì„ ê±¸ì–´ì„œ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹œì— í•„ìš”í•œ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ìˆëŠ” AccessTokenì´ nullì¼ ê²½ìš° ì¿ í‚¤ì—ì„œ ê°€ì ¸ì˜¨ í† í°ë“¤ì„ ìš”ì²­í—¤ë”ì— ì‹¤ì–´ì£¼ê³ ,    
ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— AccessTokenì´ ìˆì„ ê²½ìš° í—¤ë”ì— ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ê°€ì ¸ì˜¨ í† í°ë“¤ì„ ë³´ë‚´ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•¨
    ```
    if (AccessToken === null) {
            config.headers.Authorization = token;
            config.headers.refreshToken = refreshToken;
        } else {
            config.headers.Authorization = AccessToken;
            config.headers.refreshToken = RefreshToken;
        };
	```     
      
## Back) ğŸ˜¡TroubleShooting  

- postmanìœ¼ë¡œ Long íƒ€ì… ë¦¬ìŠ¤íŠ¸ë¥¼ ì£¼ëŠ”ë° controllerì—ì„œ ê·¸ ê°’ì„ ëª» ë°›ìŒ    
    ì›ì¸) postmanì—ì„œëŠ” jsoní˜•ì‹ìœ¼ë¡œ listë¥¼ ì œê³µí•˜ëŠ”ë° ì¼ë°˜ List ê°ì²´ëŠ” ì´ê°’ì„ ë°›ì§€ ëª»í•¨. <br>
    í•´ê²°) Longíƒ€ì… Listë¥¼ ê°€ì§€ëŠ” dto í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³  controllerì—ì„œ ì´ dtoë¥¼ í†µí•´ Listë¥¼ ì „ë‹¬ë°›ìŒ.
    
- pageë¡œ ì •ë ¬ëœ ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ë“¤ì„ returní•  ë•Œ ë¶ˆí•„ìš”í•œ ê°’ë“¤ê¹Œì§€ returnë¨(ex createdAt,cnt..postì˜ fieldë“¤)   
    ì›ì¸) Postí˜• Pageë“¤ì„ ë¦¬í„´ì„ í•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•œ ë¬¸ì œ.<br>
    í•´ê²°) ë¨¼ì € postì—ì„œ í•„ìš”í•œ ì •ë³´ë“¤ì„ ë°›ëŠ” dtoê°ì²´ë¥¼ ìƒì„±ì„ í•˜ê³  í´ë˜ìŠ¤ ë‚´ë¶€ì— postê°ì²´ë¥¼ ë°›ìœ¼ë©´ dto Listë¥¼ ë°˜í™˜í•˜ëŠ”
          ë©”ì†Œë“œë¥¼ ì‘ì„±. ì´ë¥¼ ì´ìš©í•´ì„œ Page<Post>ë¥¼ ë°˜í™˜ì„ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Page<Postdto>ë¥¼ ë°˜í™˜í•¨.
    
- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì‹œ Kakao Rest API "Redirect URI mismatch." ì—ëŸ¬   
    ì›ì¸) í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì¸ê°€ì½”ë“œ ë°›ì„ë•Œ Redirect URIê°€ ë°±ì—”ë“œì—ì„œ ì•¡ì„¸ìŠ¤í† í°ì„ ë°›ì„ë•Œ Redirect URIì´ ë‹¬ë¼ì„œ ìƒê¸´ ë¬¸ì œ.<br>
    í•´ê²°) ì•¡ì„¸ìŠ¤ í† í°ì„ ë°›ì„ë•Œ Redirect URIì„   í”„ë¡ íŠ¸ì™€ ë˜‘ê°™ì´ í•´ì¤Œìœ¼ë¡œì¨ í•´ê²°<br>
       ì˜ˆ) ("redirect_uri", "http://localhost:8080/kakao")  ->  ("redirect_uri", "http://localhost:3030/kakao") 

- ì‡¼í•‘ëª°ì— ì¡´ì¬í•˜ëŠ” 1000ê°€ì§€ ì´ìƒì˜ ë°ì´í„° ê°€ì ¸ì˜¤ëŠ” ë°©ë²•
     ì‡¼í•‘ëª°ì— ìˆëŠ” ìƒí’ˆ ì •ë³´ë¥¼ ì¼ì¼ì´ ìˆ˜ì‘ì—…ìœ¼ë¡œ ê°€ì ¸ì˜¤ëŠ”ê±´ ë¹„íš¨ìœ¨ì ì´ë¼ê³  íŒë‹¨í•˜ì—¬ íŒŒì´ì¬ìœ¼ë¡œ ì‡¼í•‘ëª°ì— ìˆëŠ” ìƒí’ˆ ì •ë³´ë¥¼ í¬ë¡¤ë§í•˜ì—¬ ì„œë²„ DBì—ë‹¤ ì €ì¥í•˜ì˜€ë‹¤.<br>
     ë”°ë¼ì„œ ìˆ˜ì‘ì—…ìœ¼ë¡œ í•˜ì‹¤ ì˜ˆìƒì†Œìœ ì‹œê°„ 6ì‹œê°„ ê±¸ë¦¬ëŠ” ì‘ì—…ì„ 30ë¶„ìœ¼ë¡œ ì¶•ì†Œí•­ ìˆ˜ ìˆìŒ<br>
     
    
<details>
    <summary>
	 <b>í¬ë¡¤ë§ ë™ì‘ ì½”ë“œ python</b>
    </summary> 
	
```python
<br>
# urlë¡œ html ë°›ì•„ì˜¤ê¸°
url = "https://www.onemorebag.kr/product/list.html?cate_no=676&page=5"
scraper = cfscrape.create_scraper()
r = scraper.get(url)
r.status_code  # 200

# id ê°’ì´ normal-products-containerì¸ ul íƒœê·¸ë§Œ ê°€ì ¸ì˜¤ê¸° 
soup = BeautifulSoup(r.content.decode('utf-8'), "lxml")
cartoonsBox = soup.find('ul', attrs={"id": "normal-products-container"})

# a íƒœê·¸ ë§Œ ì €ì¥ 
cartoons = cartoonsBox.find_all('a')
post_url_list = []
post_img_url_list = []

for idx,val in enumerate(cartoons):
  if idx % 2 == 0:
    print(val.findChild("img")['src']) # ì´ë¯¸ì§€ ì£¼ì†Œ
    post_img_url_list.append(val.findChild("img")['src'])
    print(val.get('href')) # ìƒí’ˆ ìƒì„¸í˜ì´ì§€ ì£¼ì†Œ
    post_url_list.append(val.get('href'))
  else: 
    print(str(val)[:-11].split('style="font-size:12px;color:#555555;">')[-1] ) # ìƒí’ˆ ì œëª©
  print()

	server = 'http://43.201.34.71:8080/api/member/post'
category = 5
for idx,post_url_val in enumerate(post_url_list):
  post_url = "https://www.onemorebag.kr" + post_url_val

  scraper = cfscrape.create_scraper()
  r = scraper.get(post_url)
  r.status_code  # 200

  soup = BeautifulSoup(r.content.decode('utf-8'), "lxml")
  cartoonsBox = soup.find('div', attrs={"class": "xans-element- xans-product xans-product-detaildesign"})
  cartoons = cartoonsBox.find_all('td')

# ë¬¸ìì—´ ì¶”ì¶œ   ê°€ê²©ê³¼ í¬ì¸íŠ¸ëŠ” ë¬¸ìì—´ 
  img_url = "http:" + post_img_url_list[idx]
  print("imgUrl : " + img_url)
  title_list = []
  brand_list = []
  desc_list = []
  cost_list = []
  point_list = []

  for idx,val in enumerate(cartoons):
    s = val.getText()
    if idx == 0:
      s = s.split(']')
      title = str(s[1])[1:]
      brand = str(s[0]).split('[')[-1]
    elif idx == 1:
      desc = s.replace('\r\n','-')
    elif idx == 2:
      cost=s[:-2].replace(',','')
    elif idx == 3:
      point = s.split('ì›')[0].replace(',','')
    elif idx == 4:
      continue
    #print(str(idx) + " " +s)
  print("brand : " + brand)
  print("title : " + title)
  print("desc : " + desc)
  print("cost : " + cost )
  print("point : " + point)
  response = requests.post(server, json={'imgUrl':img_url,'title': title, 'desc':desc,'cost':int(cost), 'point':int(point),'category':category,'brand':brand})
  print(response)
  print()
```
</details>


## ğŸ˜¥ì•„ì‰¬ìš´ ì  
1. ìƒì„¸í˜ì´ì§€ì—ì„œ ë’¤ë¡œê°€ê¸°ë¥¼ í•˜ë©´ ë©”ì¸ ì²« í˜ì´ì§€ë¡œ ëŒì•„ê°
2. ê´€ë¦¬ì í˜ì´ì§€
    - ìƒí’ˆ ë“±ë¡
    - íšŒì›ê´€ë¦¬
    
   
